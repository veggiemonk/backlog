---
id: "25.02"
title: Create response size estimator function
status: todo
labels:
    - mcp
    - response-size
    - phase-1
parent: "25"
priority: critical
created_at: 2025-09-19T13:45:01.240728Z
---
## Description

Implement a function to estimate the serialized JSON response size before marshaling to prevent MCP client token limit errors.

## Acceptance Criteria
<!-- AC:BEGIN -->

- [ ] #1 Response size estimator function created
- [ ] #2 Function accurately estimates JSON size
- [ ] #3 Configurable safety margin for estimates

<!-- AC:END -->

## Implementation Plan

1. Create internal/mcp/response_estimator.go
2. Implement EstimateResponseSize(tasks []*core.Task) int
3. Account for JSON overhead and field serialization
4. Add safety margin configuration


## Implementation Notes


